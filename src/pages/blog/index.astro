---
import BaseLayout from '../../layouts/BaseLayout.astro';

// Simple: list MDX files from the content directory
const posts = await Astro.glob('../../content/blog/*.mdx');
const sortedPosts = posts
  .map(post => ({
    ...post.frontmatter,
    url: `/blog/${post.frontmatter.slug}`,
    Content: post.Content,
  }))
  .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());
---

<BaseLayout title="Blog â€” Your Name">
  <h1 class="text-2xl font-semibold text-zinc-900 dark:text-zinc-50 tracking-tight mb-2">
    Blog
  </h1>
  <p class="text-sm text-zinc-500 dark:text-zinc-400 mb-10">
    Notes on research, technical write-ups, and things I've learned.
  </p>

  <div class="space-y-8">
    {sortedPosts.map((post) => (
      <article class="group">
        <a href={post.url} class="block">
          <div class="flex items-baseline gap-3 mb-1">
            <time class="shrink-0 text-xs font-mono text-zinc-400 dark:text-zinc-500">
              {post.date}
            </time>
            <div class="flex gap-1.5">
              {post.tags?.map((tag: string) => (
                <span class="tag text-[10px]">{tag}</span>
              ))}
            </div>
          </div>
          <h2 class="text-base font-medium text-zinc-900 dark:text-zinc-100 group-hover:text-accent-600 dark:group-hover:text-accent-400 transition-colors">
            {post.title}
          </h2>
          <p class="mt-1 text-sm text-zinc-500 dark:text-zinc-400 leading-relaxed">
            {post.description}
          </p>
        </a>
      </article>
    ))}
  </div>

  {sortedPosts.length === 0 && (
    <p class="text-sm text-zinc-400 py-8">No posts yet. Check back soon.</p>
  )}
</BaseLayout>
