---
import BaseLayout from '../../layouts/BaseLayout.astro';

export async function getStaticPaths() {
  const posts = await Astro.glob('../../content/blog/*.mdx');
  return posts.map(post => ({
    params: { slug: post.frontmatter.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { title, date, description, tags } = post.frontmatter;
const Content = post.Content;
---

<BaseLayout title={`${title} — Shruti Joshi`} description={description}>
  <article>
    <header class="mb-10">
      <a href="/blog" class="text-xs text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 transition-colors mb-4 inline-block">
        ← Back to blog
      </a>
      <h1 class="text-2xl sm:text-3xl font-semibold text-zinc-900 dark:text-zinc-50 tracking-tight leading-tight">
        {title}
      </h1>
      <div class="mt-3 flex flex-wrap items-center gap-3">
        <time class="text-sm text-zinc-400 dark:text-zinc-500 font-mono">{date}</time>
        {tags?.map((tag: string) => (
          <span class="tag text-[10px]">{tag}</span>
        ))}
      </div>
    </header>

    <div class="prose prose-zinc dark:prose-invert prose-sm max-w-none
                prose-headings:tracking-tight
                prose-a:text-accent-600 dark:prose-a:text-accent-400
                prose-a:decoration-accent-300 dark:prose-a:decoration-accent-700
                prose-code:text-sm prose-code:bg-zinc-100 dark:prose-code:bg-zinc-800
                prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded
                prose-pre:!bg-zinc-950 dark:prose-pre:!bg-zinc-900
                prose-img:rounded-lg prose-img:border prose-img:border-zinc-200 dark:prose-img:border-zinc-800">
      <Content />
    </div>
  </article>
</BaseLayout>
