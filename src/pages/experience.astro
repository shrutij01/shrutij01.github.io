---
import BaseLayout from '../layouts/BaseLayout.astro';

const experience = [
  {
    period: '2024 – present',
    role: 'PhD Student',
    org: 'University Name',
    orgUrl: '#',
    description: 'Causal representation learning and mechanistic interpretability. Advised by Professor X.',
    tags: ['identifiability', 'LLMs', 'causal inference'],
    type: 'education' as const,
  },
  {
    period: 'Summer 2025',
    role: 'Research Intern',
    org: 'Company Name',
    orgUrl: '#',
    description: 'Interpretability team. Worked on evaluating causal claims in circuit-level analyses of language models.',
    tags: ['interpretability', 'LLMs'],
    type: 'industry' as const,
  },
  {
    period: '2022 – 2024',
    role: 'MSc Computer Science',
    org: 'University Name',
    orgUrl: '#',
    description: 'Thesis: "Title of your thesis." Focused on nonlinear ICA and disentangled representations.',
    tags: ['nonlinear ICA', 'disentanglement'],
    type: 'education' as const,
  },
  {
    period: 'Summer 2023',
    role: 'Research Intern',
    org: 'Lab / Company Name',
    orgUrl: '#',
    description: 'Representation learning for scientific applications. Built evaluation pipelines for identifiability metrics.',
    tags: ['evaluation', 'scientific ML'],
    type: 'industry' as const,
  },
  {
    period: '2018 – 2022',
    role: 'BSc in Mathematics & CS',
    org: 'University Name',
    orgUrl: '#',
    description: 'Foundations in probability, optimisation, and machine learning.',
    tags: [],
    type: 'education' as const,
  },
];

const typeStyles = {
  education: {
    dot: 'bg-accent-500',
    badge: 'bg-accent-50 text-accent-700 border-accent-200 dark:bg-accent-950 dark:text-accent-300 dark:border-accent-800',
  },
  industry: {
    dot: 'bg-emerald-500',
    badge: 'bg-emerald-50 text-emerald-700 border-emerald-200 dark:bg-emerald-950 dark:text-emerald-300 dark:border-emerald-800',
  },
};
---

<BaseLayout title="Experience — Your Name">
  <h1 class="text-2xl font-semibold text-zinc-900 dark:text-zinc-50 tracking-tight mb-2">
    Experience
  </h1>
  <p class="text-sm text-zinc-500 dark:text-zinc-400 mb-10">
    Research and education timeline.
    <a href="/cv.pdf" class="link-underline ml-1">Full CV (PDF) ↗</a>
  </p>

  <!-- Timeline -->
  <div class="relative">
    <!-- Vertical line -->
    <div class="absolute left-[7px] top-2 bottom-2 w-px bg-zinc-200 dark:bg-zinc-800"></div>

    <div class="space-y-10">
      {experience.map((item) => {
        const styles = typeStyles[item.type];
        return (
          <div class="relative pl-8">
            {/* Dot */}
            <div class={`absolute left-0 top-1.5 w-[15px] h-[15px] rounded-full border-[3px] border-white dark:border-zinc-950 ${styles.dot}`}></div>

            {/* Content */}
            <div>
              <div class="flex flex-wrap items-center gap-2 mb-1">
                <span class="text-xs font-mono text-zinc-400 dark:text-zinc-500">
                  {item.period}
                </span>
                <span class={`text-[10px] font-medium px-2 py-0.5 rounded-full border ${styles.badge}`}>
                  {item.type}
                </span>
              </div>

              <h3 class="text-base font-medium text-zinc-900 dark:text-zinc-100">
                {item.role}
              </h3>
              <p class="text-sm text-zinc-500 dark:text-zinc-400">
                <a href={item.orgUrl} class="link-underline">{item.org}</a>
              </p>

              <p class="mt-2 text-sm text-zinc-600 dark:text-zinc-400 leading-relaxed max-w-xl">
                {item.description}
              </p>

              {item.tags.length > 0 && (
                <div class="mt-2 flex flex-wrap gap-1.5">
                  {item.tags.map((tag) => (
                    <span class="tag text-[10px]">{tag}</span>
                  ))}
                </div>
              )}
            </div>
          </div>
        );
      })}
    </div>
  </div>

  <!-- Skills / Tools (compact) -->
  <section class="mt-16 pt-8 border-t border-zinc-100 dark:border-zinc-800/50">
    <h2 class="section-heading">Tools & Languages</h2>
    <div class="flex flex-wrap gap-2 text-sm text-zinc-500 dark:text-zinc-400">
      {['Python', 'PyTorch', 'JAX', 'TypeScript', 'Rust', 'Git', 'Docker', 'LaTeX', 'Weights & Biases', 'HPC / SLURM'].map((tool) => (
        <span class="px-3 py-1 rounded-lg border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900 text-xs font-medium">
          {tool}
        </span>
      ))}
    </div>
  </section>
</BaseLayout>
